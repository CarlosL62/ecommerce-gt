--
-- PostgreSQL database dump
--

-- Dumped from database version 17.6
-- Dumped by pg_dump version 17.5

-- Started on 2025-10-28 16:30:45 CST

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 6 (class 2615 OID 17164)
-- Name: ecommerce; Type: SCHEMA; Schema: -; Owner: ecommerce_app
--

CREATE SCHEMA ecommerce;


ALTER SCHEMA ecommerce OWNER TO ecommerce_app;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 223 (class 1259 OID 17257)
-- Name: cart_items; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.cart_items (
    id bigint NOT NULL,
    unit_price numeric(12,2) NOT NULL,
    cart_id bigint NOT NULL,
    product_id bigint NOT NULL,
    quantity integer NOT NULL
);


ALTER TABLE ecommerce.cart_items OWNER TO ecommerce_app;

--
-- TOC entry 222 (class 1259 OID 17256)
-- Name: cart_items_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.cart_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.cart_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 225 (class 1259 OID 17263)
-- Name: carts; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.carts (
    id bigint NOT NULL,
    user_id bigint NOT NULL
);


ALTER TABLE ecommerce.carts OWNER TO ecommerce_app;

--
-- TOC entry 224 (class 1259 OID 17262)
-- Name: carts_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.carts ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.carts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 227 (class 1259 OID 17286)
-- Name: order_items; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.order_items (
    id bigint NOT NULL,
    line_total numeric(12,2) NOT NULL,
    quantity integer NOT NULL,
    unit_price numeric(12,2) NOT NULL,
    order_id bigint NOT NULL,
    product_id bigint NOT NULL
);


ALTER TABLE ecommerce.order_items OWNER TO ecommerce_app;

--
-- TOC entry 226 (class 1259 OID 17285)
-- Name: order_items_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.order_items ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.order_items_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 229 (class 1259 OID 17292)
-- Name: orders; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.orders (
    id bigint NOT NULL,
    created_at timestamp(6) with time zone NOT NULL,
    delivery_due_date timestamp(6) with time zone NOT NULL,
    platform_fee numeric(12,2) NOT NULL,
    seller_amount numeric(12,2) NOT NULL,
    status character varying(255) DEFAULT 'PLACED'::character varying NOT NULL,
    subtotal numeric(12,2) NOT NULL,
    buyer_id bigint NOT NULL,
    CONSTRAINT orders_status_check CHECK (((status)::text = ANY ((ARRAY['PLACED'::character varying, 'SHIPPED'::character varying, 'DELIVERED'::character varying])::text[])))
);


ALTER TABLE ecommerce.orders OWNER TO ecommerce_app;

--
-- TOC entry 228 (class 1259 OID 17291)
-- Name: orders_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.orders ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.orders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 231 (class 1259 OID 17299)
-- Name: payments; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.payments (
    id bigint NOT NULL,
    amount numeric(12,2) NOT NULL,
    brand character varying(255) NOT NULL,
    card_holder character varying(255) NOT NULL,
    card_id bigint,
    card_number character varying(19) NOT NULL,
    paid_at timestamp(6) with time zone NOT NULL,
    order_id bigint NOT NULL
);


ALTER TABLE ecommerce.payments OWNER TO ecommerce_app;

--
-- TOC entry 230 (class 1259 OID 17298)
-- Name: payments_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.payments ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.payments_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 221 (class 1259 OID 17240)
-- Name: products; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.products (
    id bigint NOT NULL,
    category character varying(255) NOT NULL,
    condition character varying(255) NOT NULL,
    created_at timestamp(6) with time zone NOT NULL,
    description character varying(255) NOT NULL,
    image_url character varying(255) NOT NULL,
    name character varying(255) NOT NULL,
    price numeric(12,2) NOT NULL,
    status character varying(255) NOT NULL,
    stock integer NOT NULL,
    updated_at timestamp(6) with time zone NOT NULL,
    owner_id bigint NOT NULL,
    CONSTRAINT products_category_check CHECK (((category)::text = ANY ((ARRAY['TECHNOLOGY'::character varying, 'HOME'::character varying, 'ACADEMIC'::character varying, 'PERSONAL'::character varying, 'DECORATION'::character varying, 'OTHER'::character varying])::text[]))),
    CONSTRAINT products_condition_check CHECK (((condition)::text = ANY ((ARRAY['NEW'::character varying, 'USED'::character varying])::text[]))),
    CONSTRAINT products_status_check CHECK (((status)::text = ANY ((ARRAY['IN_REVIEW'::character varying, 'APPROVED'::character varying, 'REJECTED'::character varying])::text[]))),
    CONSTRAINT products_stock_check CHECK ((stock >= 0))
);


ALTER TABLE ecommerce.products OWNER TO ecommerce_app;

--
-- TOC entry 220 (class 1259 OID 17239)
-- Name: products_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.products ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.products_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 233 (class 1259 OID 17307)
-- Name: saved_cards; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.saved_cards (
    id bigint NOT NULL,
    brand character varying(255) NOT NULL,
    card_holder character varying(255) NOT NULL,
    card_number character varying(19) NOT NULL,
    created_at timestamp(6) with time zone NOT NULL,
    exp_month integer,
    exp_year integer,
    label character varying(64),
    updated_at timestamp(6) with time zone NOT NULL,
    owner_id bigint NOT NULL
);


ALTER TABLE ecommerce.saved_cards OWNER TO ecommerce_app;

--
-- TOC entry 232 (class 1259 OID 17306)
-- Name: saved_cards_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.saved_cards ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.saved_cards_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 219 (class 1259 OID 17186)
-- Name: users; Type: TABLE; Schema: ecommerce; Owner: ecommerce_app
--

CREATE TABLE ecommerce.users (
    id bigint NOT NULL,
    email character varying(255) NOT NULL,
    name character varying(255) NOT NULL,
    password character varying(255) NOT NULL,
    role character varying(255) NOT NULL,
    active boolean DEFAULT true NOT NULL,
    CONSTRAINT users_role_check CHECK (((role)::text = ANY ((ARRAY['ADMIN'::character varying, 'MODERATOR'::character varying, 'LOGISTICS'::character varying, 'COMMON'::character varying])::text[])))
);


ALTER TABLE ecommerce.users OWNER TO ecommerce_app;

--
-- TOC entry 218 (class 1259 OID 17185)
-- Name: users_id_seq; Type: SEQUENCE; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ecommerce.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME ecommerce.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3782 (class 0 OID 17257)
-- Dependencies: 223
-- Data for Name: cart_items; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.cart_items (id, unit_price, cart_id, product_id, quantity) FROM stdin;
15	1000.00	1	4	1
\.


--
-- TOC entry 3784 (class 0 OID 17263)
-- Dependencies: 225
-- Data for Name: carts; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.carts (id, user_id) FROM stdin;
1	2
2	4
3	14
\.


--
-- TOC entry 3786 (class 0 OID 17286)
-- Dependencies: 227
-- Data for Name: order_items; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.order_items (id, line_total, quantity, unit_price, order_id, product_id) FROM stdin;
1	2500.00	1	2500.00	1	1
2	150.00	1	150.00	2	2
3	10000000.00	1	10000000.00	3	3
4	1000.00	1	1000.00	4	4
5	2000.00	1	2000.00	5	1
14	2000.00	1	2000.00	14	1
\.


--
-- TOC entry 3788 (class 0 OID 17292)
-- Dependencies: 229
-- Data for Name: orders; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.orders (id, created_at, delivery_due_date, platform_fee, seller_amount, status, subtotal, buyer_id) FROM stdin;
3	2025-10-27 01:17:15.731143-06	2025-11-01 01:17:15.731143-06	500000.00	9500000.00	PLACED	10000000.00	4
2	2025-10-27 00:22:12.64837-06	2025-11-01 00:22:12.64837-06	7.50	142.50	DELIVERED	150.00	4
1	2025-10-27 00:21:41.151404-06	2025-11-01 00:21:41.151404-06	125.00	2375.00	SHIPPED	2500.00	4
4	2025-10-27 11:51:05.567214-06	2025-11-01 11:51:05.567214-06	50.00	950.00	DELIVERED	1000.00	2
5	2025-10-27 12:09:19.838343-06	2025-11-01 12:09:19.838343-06	100.00	1900.00	PLACED	2000.00	14
14	2025-10-27 12:21:30.031231-06	2025-11-01 12:21:30.031231-06	100.00	1900.00	PLACED	2000.00	14
\.


--
-- TOC entry 3790 (class 0 OID 17299)
-- Dependencies: 231
-- Data for Name: payments; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.payments (id, amount, brand, card_holder, card_id, card_number, paid_at, order_id) FROM stdin;
1	2500.00	VISA	Juan Pérez	1	4111111111111111	2025-10-27 00:21:41.161319-06	1
2	150.00	VISA	Juan Pérez	1	4111111111111111	2025-10-27 00:22:12.654166-06	2
3	10000000.00	VISA	Juan Pérez	1	4111111111111111	2025-10-27 01:17:15.736623-06	3
4	1000.00	MASTERCARD	Juanito	2	4111111111111111	2025-10-27 11:51:05.575659-06	4
5	2000.00	VISA	Juanito	\N	4111111111111111	2025-10-27 12:09:19.843603-06	5
14	2000.00	VISA	Juaaaa	5	8000100030002000	2025-10-27 12:21:30.045688-06	14
\.


--
-- TOC entry 3780 (class 0 OID 17240)
-- Dependencies: 221
-- Data for Name: products; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.products (id, category, condition, created_at, description, image_url, name, price, status, stock, updated_at, owner_id) FROM stdin;
1	TECHNOLOGY	USED	2025-10-25 22:55:36.522685-06	Core i5, 8GB RAM, buen estado	https://picsum.photos/seed/laptop/800/600	Laptop usada	2000.00	IN_REVIEW	0	2025-10-28 14:46:34.261924-06	2
2	PERSONAL	NEW	2025-10-26 17:45:57.7573-06	Camiseta talla M	https://www.vecteezy.com/photo/2658280-blank-black-t-shirt-on-white-background	Camiseta de edición limitada	150.00	APPROVED	1	2025-10-27 00:22:12.656188-06	2
3	HOME	NEW	2025-10-26 17:50:40.381466-06	Tanque anti bombas	https://unsplash.com/es/fotos/tanque-militar-o-del-ejercito-listo-para-atacar-y-moviendose-sobre-un-terreno-de-campo-de-batalla-desierto-RQWUlHAXBfY	Tanque todo terreno	10000000.00	APPROVED	1	2025-10-27 01:17:15.74009-06	2
4	PERSONAL	NEW	2025-10-27 11:46:23.462538-06	Disfraz para señorita	https://www.pexels.com/es-es/foto/34281276/	Disfraz de calavera	1000.00	APPROVED	1	2025-10-27 11:51:05.579595-06	14
\.


--
-- TOC entry 3792 (class 0 OID 17307)
-- Dependencies: 233
-- Data for Name: saved_cards; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.saved_cards (id, brand, card_holder, card_number, created_at, exp_month, exp_year, label, updated_at, owner_id) FROM stdin;
1	VISA	Juan Pérez	4111111111111111	2025-10-27 00:21:41.159487-06	\N	\N	\N	2025-10-27 00:21:41.159487-06	4
2	MASTERCARD	Juanito	4111111111111111	2025-10-27 11:51:05.573534-06	\N	\N	\N	2025-10-27 11:51:05.573534-06	2
5	VISA	Juaaaa	8000100030002000	2025-10-27 12:21:30.044377-06	\N	\N	\N	2025-10-27 12:21:30.044377-06	14
\.


--
-- TOC entry 3778 (class 0 OID 17186)
-- Dependencies: 219
-- Data for Name: users; Type: TABLE DATA; Schema: ecommerce; Owner: ecommerce_app
--

COPY ecommerce.users (id, email, name, password, role, active) FROM stdin;
1	admin@gmail.com	Admin Demo	$2a$10$IcRUvAn4sMHcvRI7Go70tuiwV3bNfTc/2ySyMmYqUWA4ayZGSBFXS	ADMIN	t
2	user1@gmail.com	User Demo	$2a$10$rMY1hNb22OeOdufF1bQqYOWQVcsTWTe3FH0E/2ppHYzUU3XSHPndu	COMMON	t
10	mod3@gmail.com	Moderadora Tres	$2a$10$iGZrR04gAGWdINpG4OPAfeCdqokFUkfLVQoGYIEY3mSxn46P7pKue	MODERATOR	t
3	user2@gmail.com	User Demo	$2a$10$8qzNAqOSmzqnTrz2yfPgXe7vHzIwPUIfI2irTim10vPrElquMxC1C	COMMON	t
4	user3@gmail.com	User Demo	$2a$10$bDTJBdQM4mvF413mkPqjyOc9QW0ztXndJalfkkdO4iceDMpoCAHiO	COMMON	t
5	user4@gmail.com	User Demo	$2a$10$A3Rsd4h0IXZswhy9FvGAs.gUtOLrjBv4iC6MUsBIGrNop5IqM4jii	COMMON	t
6	user5@gmail.com	User Demo	$2a$10$TrrslVblbCXhK9NbLxj..uQKekSsYa2yb0bPun5ZcTiYhs6JkEBIa	COMMON	t
8	mod1@gmail.com	Moderadora Uno	$2a$10$5bgGjL4DsXn7EeNr38Nw0.y.ZPGWPigjePWTLltgPxQVjGZMp3tGu	MODERATOR	t
9	mod2@gmail.com	Moderadora Dos	$2a$10$3a1DZtNk0DcI9uaRTQUiMuaZMMZMNoKUrmb70tIhF17y9qMu71C72	MODERATOR	t
11	log1@gmail.com	Logistica Uno	$2a$10$0256bpPcjywIOrl.8kFsierjd2v0hK9VVC5itaIANo48MjwIy8Iwe	LOGISTICS	t
12	carlo@gmail.com	Carlos	$2a$10$8nKuBwxgnYKH/YgBifB5POyt//fN7UiQqjdJZXfY9EuRHH/vac8uS	MODERATOR	t
13	josh@gmail.com	Josh	$2a$10$lwEyDVEIrSAxDiyQqx.Kdu4TdhQbDJNgrQpmRLoyYdBXJsSfsaGqa	LOGISTICS	t
7	user6@gmail.com	User Demo	$2a$10$F2OYv0rwp8VV50nOTMX2DO3vpNIf3.t.M4j6yTLX4AwGYEh4IyWtu	COMMON	t
14	user99@gmail.com	User Demo	$2a$10$iPnG98qQBsVskMgYcME9KuCrYQy1YGPKIyb3Nx6kXT0n5tdlQCXMK	COMMON	t
\.


--
-- TOC entry 3798 (class 0 OID 0)
-- Dependencies: 222
-- Name: cart_items_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.cart_items_id_seq', 15, true);


--
-- TOC entry 3799 (class 0 OID 0)
-- Dependencies: 224
-- Name: carts_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.carts_id_seq', 3, true);


--
-- TOC entry 3800 (class 0 OID 0)
-- Dependencies: 226
-- Name: order_items_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.order_items_id_seq', 14, true);


--
-- TOC entry 3801 (class 0 OID 0)
-- Dependencies: 228
-- Name: orders_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.orders_id_seq', 14, true);


--
-- TOC entry 3802 (class 0 OID 0)
-- Dependencies: 230
-- Name: payments_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.payments_id_seq', 14, true);


--
-- TOC entry 3803 (class 0 OID 0)
-- Dependencies: 220
-- Name: products_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.products_id_seq', 4, true);


--
-- TOC entry 3804 (class 0 OID 0)
-- Dependencies: 232
-- Name: saved_cards_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.saved_cards_id_seq', 5, true);


--
-- TOC entry 3805 (class 0 OID 0)
-- Dependencies: 218
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: ecommerce; Owner: ecommerce_app
--

SELECT pg_catalog.setval('ecommerce.users_id_seq', 14, true);


--
-- TOC entry 3608 (class 2606 OID 17261)
-- Name: cart_items cart_items_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.cart_items
    ADD CONSTRAINT cart_items_pkey PRIMARY KEY (id);


--
-- TOC entry 3610 (class 2606 OID 17267)
-- Name: carts carts_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.carts
    ADD CONSTRAINT carts_pkey PRIMARY KEY (id);


--
-- TOC entry 3614 (class 2606 OID 17290)
-- Name: order_items order_items_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.order_items
    ADD CONSTRAINT order_items_pkey PRIMARY KEY (id);


--
-- TOC entry 3616 (class 2606 OID 17297)
-- Name: orders orders_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.orders
    ADD CONSTRAINT orders_pkey PRIMARY KEY (id);


--
-- TOC entry 3618 (class 2606 OID 17305)
-- Name: payments payments_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.payments
    ADD CONSTRAINT payments_pkey PRIMARY KEY (id);


--
-- TOC entry 3606 (class 2606 OID 17250)
-- Name: products products_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.products
    ADD CONSTRAINT products_pkey PRIMARY KEY (id);


--
-- TOC entry 3622 (class 2606 OID 17313)
-- Name: saved_cards saved_cards_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.saved_cards
    ADD CONSTRAINT saved_cards_pkey PRIMARY KEY (id);


--
-- TOC entry 3612 (class 2606 OID 17269)
-- Name: carts uk64t7ox312pqal3p7fg9o503c2; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.carts
    ADD CONSTRAINT uk64t7ox312pqal3p7fg9o503c2 UNIQUE (user_id);


--
-- TOC entry 3602 (class 2606 OID 17195)
-- Name: users uk6dotkott2kjsp8vw4d0m25fb7; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.users
    ADD CONSTRAINT uk6dotkott2kjsp8vw4d0m25fb7 UNIQUE (email);


--
-- TOC entry 3620 (class 2606 OID 17315)
-- Name: payments uk8vo36cen604as7etdfwmyjsxt; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.payments
    ADD CONSTRAINT uk8vo36cen604as7etdfwmyjsxt UNIQUE (order_id);


--
-- TOC entry 3604 (class 2606 OID 17193)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 3624 (class 2606 OID 17275)
-- Name: cart_items fk1re40cjegsfvw58xrkdp6bac6; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.cart_items
    ADD CONSTRAINT fk1re40cjegsfvw58xrkdp6bac6 FOREIGN KEY (product_id) REFERENCES ecommerce.products(id);


--
-- TOC entry 3630 (class 2606 OID 17331)
-- Name: payments fk81gagumt0r8y3rmudcgpbk42l; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.payments
    ADD CONSTRAINT fk81gagumt0r8y3rmudcgpbk42l FOREIGN KEY (order_id) REFERENCES ecommerce.orders(id);


--
-- TOC entry 3626 (class 2606 OID 17280)
-- Name: carts fkb5o626f86h46m4s7ms6ginnop; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.carts
    ADD CONSTRAINT fkb5o626f86h46m4s7ms6ginnop FOREIGN KEY (user_id) REFERENCES ecommerce.users(id);


--
-- TOC entry 3627 (class 2606 OID 17316)
-- Name: order_items fkbioxgbv59vetrxe0ejfubep1w; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.order_items
    ADD CONSTRAINT fkbioxgbv59vetrxe0ejfubep1w FOREIGN KEY (order_id) REFERENCES ecommerce.orders(id);


--
-- TOC entry 3629 (class 2606 OID 17326)
-- Name: orders fkhtx3insd5ge6w486omk4fnk54; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.orders
    ADD CONSTRAINT fkhtx3insd5ge6w486omk4fnk54 FOREIGN KEY (buyer_id) REFERENCES ecommerce.users(id);


--
-- TOC entry 3631 (class 2606 OID 17336)
-- Name: saved_cards fkm20r4kly1nb2gya7gbg6t5x3y; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.saved_cards
    ADD CONSTRAINT fkm20r4kly1nb2gya7gbg6t5x3y FOREIGN KEY (owner_id) REFERENCES ecommerce.users(id);


--
-- TOC entry 3623 (class 2606 OID 17251)
-- Name: products fkmodgy1j6kai83i3mweyp731qc; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.products
    ADD CONSTRAINT fkmodgy1j6kai83i3mweyp731qc FOREIGN KEY (owner_id) REFERENCES ecommerce.users(id);


--
-- TOC entry 3628 (class 2606 OID 17321)
-- Name: order_items fkocimc7dtr037rh4ls4l95nlfi; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.order_items
    ADD CONSTRAINT fkocimc7dtr037rh4ls4l95nlfi FOREIGN KEY (product_id) REFERENCES ecommerce.products(id);


--
-- TOC entry 3625 (class 2606 OID 17270)
-- Name: cart_items fkpcttvuq4mxppo8sxggjtn5i2c; Type: FK CONSTRAINT; Schema: ecommerce; Owner: ecommerce_app
--

ALTER TABLE ONLY ecommerce.cart_items
    ADD CONSTRAINT fkpcttvuq4mxppo8sxggjtn5i2c FOREIGN KEY (cart_id) REFERENCES ecommerce.carts(id);


-- Completed on 2025-10-28 16:30:45 CST

--
-- PostgreSQL database dump complete
--

